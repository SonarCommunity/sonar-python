<p>This rule raises an issue when legacy <code>numpy.random.RandomState</code> is used.</p>
<h2>Why is this an issue?</h2>
<p>Using a predictable seed is a common best practice when using NumPy to create reproducible results. To that end, using
<code>np.random.seed(number)</code> to set the seed of the global <code>numpy.random.RandomState</code> has been the privileged solution for a long
time.</p>
<p><code>numpy.random.RandomState</code> and its associated methods rely on a global state, which may be problematic when threads or other forms of
concurrency are involved. The global state may be altered and the global seed may be reset at various points in the program (for instance, through an
imported package or script), which would lead to irreproducible results.</p>
<p>Instead, the preferred best practice to generate reproducible pseudorandom numbers is to instantiate a <code>numpy.random.Generator</code> object
with a seed and reuse it in different parts of the code. This avoids the reliance on a global state. Whenever a new seed is needed, a new generator
may be created instead of mutating a global state.</p>
<p>Below is the list of legacy functions and their alternatives:</p>
<table>
  <colgroup>
    <col style="width: 50%;">
    <col style="width: 50%;">
  </colgroup>
  <tbody>
    <tr>
      <td><p>Legacy function name</p></td>
      <td><p>numpy.random.Generator alternative</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.seed</p></td>
      <td><p>numpy.random.default_rng</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.rand</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.randn</p></td>
      <td><p>numpy.random.Generator.standard_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.randint</p></td>
      <td><p>numpy.random.Generator.integers</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.random_integers</p></td>
      <td><p>numpy.random.Generator.integers</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.random_sample</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.choice</p></td>
      <td><p>numpy.random.Generator.choice</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.bytes</p></td>
      <td><p>numpy.random.Generator.bytes</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.shuffle</p></td>
      <td><p>numpy.random.Generator.shuffle</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.permutation</p></td>
      <td><p>numpy.random.Generator.permutation</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.beta</p></td>
      <td><p>numpy.random.Generator.beta</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.binomial</p></td>
      <td><p>numpy.random.Generator.binomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.chisquare</p></td>
      <td><p>numpy.random.Generator.chisquare</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.dirichlet</p></td>
      <td><p>numpy.random.Generator.dirichlet</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.exponential</p></td>
      <td><p>numpy.random.Generator.exponential</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.f</p></td>
      <td><p>numpy.random.Generator.f</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.gamma</p></td>
      <td><p>numpy.random.Generator.gamma</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.geometric</p></td>
      <td><p>numpy.random.Generator.geometric</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.gumbel</p></td>
      <td><p>numpy.random.Generator.gumbel</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.hypergeometric</p></td>
      <td><p>numpy.random.Generator.hypergeometric</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.laplace</p></td>
      <td><p>numpy.random.Generator.laplace</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.logistic</p></td>
      <td><p>numpy.random.Generator.logistic</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.lognormal</p></td>
      <td><p>numpy.random.Generator.lognormal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.logseries</p></td>
      <td><p>numpy.random.Generator.logseries</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.multinomial</p></td>
      <td><p>numpy.random.Generator.multinomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.multivariate_normal</p></td>
      <td><p>numpy.random.Generator.multivariate_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.negative_binomial</p></td>
      <td><p>numpy.random.Generator.negative_binomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.noncentral_chisquare</p></td>
      <td><p>numpy.random.Generator.noncentral_chisquare</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.noncentral_f</p></td>
      <td><p>numpy.random.Generator.noncentral_f</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.normal</p></td>
      <td><p>numpy.random.Generator.normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.pareto</p></td>
      <td><p>numpy.random.Generator.pareto</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.poisson</p></td>
      <td><p>numpy.random.Generator.poisson</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.power</p></td>
      <td><p>numpy.random.Generator.power</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.rayleigh</p></td>
      <td><p>numpy.random.Generator.rayleigh</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.standard_cauchy</p></td>
      <td><p>numpy.random.Generator.standard_cauchy</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.standard_exponential</p></td>
      <td><p>numpy.random.Generator.standard_exponential</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.standard_gamma</p></td>
      <td><p>numpy.random.Generator.standard_gamma</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.standard_normal</p></td>
      <td><p>numpy.random.Generator.standard_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.standard_t</p></td>
      <td><p>numpy.random.Generator.standard_t</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.triangular</p></td>
      <td><p>numpy.random.Generator.triangular</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.uniform</p></td>
      <td><p>numpy.random.Generator.uniform</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.vonmises</p></td>
      <td><p>numpy.random.Generator.vonmises</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.wald</p></td>
      <td><p>numpy.random.Generator.wald</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.weibull</p></td>
      <td><p>numpy.random.Generator.weibull</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.RandomState.zipf</p></td>
      <td><p>numpy.random.Generator.zipf</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.beta</p></td>
      <td><p>numpy.random.Generator.beta</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.binomial</p></td>
      <td><p>numpy.random.Generator.binomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.bytes</p></td>
      <td><p>numpy.random.Generator.bytes</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.chisquare</p></td>
      <td><p>numpy.random.Generator.chisquare</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.choice</p></td>
      <td><p>numpy.random.Generator.choice</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.dirichlet</p></td>
      <td><p>numpy.random.Generator.dirichlet</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.exponential</p></td>
      <td><p>numpy.random.Generator.exponential</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.f</p></td>
      <td><p>numpy.random.Generator.f</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.gamma</p></td>
      <td><p>numpy.random.Generator.gamma</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.geometric</p></td>
      <td><p>numpy.random.Generator.geometric</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.gumbel</p></td>
      <td><p>numpy.random.Generator.gumbel</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.hypergeometric</p></td>
      <td><p>numpy.random.Generator.hypergeometric</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.laplace</p></td>
      <td><p>numpy.random.Generator.laplace</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.logistic</p></td>
      <td><p>numpy.random.Generator.logistic</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.lognormal</p></td>
      <td><p>numpy.random.Generator.lognormal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.logseries</p></td>
      <td><p>numpy.random.Generator.logseries</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.multinomial</p></td>
      <td><p>numpy.random.Generator.multinomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.multivariate_normal</p></td>
      <td><p>numpy.random.Generator.multivariate_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.negative_binomial</p></td>
      <td><p>numpy.random.Generator.negative_binomial</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.noncentral_chisquare</p></td>
      <td><p>numpy.random.Generator.noncentral_chisquare</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.noncentral_f</p></td>
      <td><p>numpy.random.Generator.noncentral_f</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.normal</p></td>
      <td><p>numpy.random.Generator.normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.pareto</p></td>
      <td><p>numpy.random.Generator.pareto</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.permutation</p></td>
      <td><p>numpy.random.Generator.permutation</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.poisson</p></td>
      <td><p>numpy.random.Generator.poisson</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.power</p></td>
      <td><p>numpy.random.Generator.power</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.rand</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.randint</p></td>
      <td><p>numpy.random.Generator.integers</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.randn</p></td>
      <td><p>numpy.random.Generator.standard_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.random</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.random_integers</p></td>
      <td><p>numpy.random.Generator.integers</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.random_sample</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.ranf</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.rayleigh</p></td>
      <td><p>numpy.random.Generator.rayleigh</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.sample</p></td>
      <td><p>numpy.random.Generator.random</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.seed</p></td>
      <td><p>numpy.random.default_rng</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.shuffle</p></td>
      <td><p>numpy.random.Generator.shuffle</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.standard_cauchy</p></td>
      <td><p>numpy.random.Generator.standard_cauchy</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.standard_exponential</p></td>
      <td><p>numpy.random.Generator.standard_exponential</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.standard_gamma</p></td>
      <td><p>numpy.random.Generator.standard_gamma</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.standard_normal</p></td>
      <td><p>numpy.random.Generator.standard_normal</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.standard_t</p></td>
      <td><p>numpy.random.Generator.standard_t</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.triangular</p></td>
      <td><p>numpy.random.Generator.triangular</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.uniform</p></td>
      <td><p>numpy.random.Generator.uniform</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.vonmises</p></td>
      <td><p>numpy.random.Generator.vonmises</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.wald</p></td>
      <td><p>numpy.random.Generator.wald</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.weibull</p></td>
      <td><p>numpy.random.Generator.weibull</p></td>
    </tr>
    <tr>
      <td><p>numpy.random.zipf</p></td>
      <td><p>numpy.random.Generator.zipf</p></td>
    </tr>
  </tbody>
</table>
<h2>How to fix it</h2>
<p>To fix this issue, replace usages of <code>numpy.random.RandomState</code> to <code>numpy.random.Generator</code>.</p>
<h3>Code examples</h3>
<h4>Noncompliant code example</h4>
<pre data-diff-id="1" data-diff-type="noncompliant">
import numpy as np
def foo():
    np.random.seed(42)
    x = np.random.randn()  # Noncompliant: this relies on numpy.random.RandomState, which is deprecated
</pre>
<h4>Compliant solution</h4>
<pre data-diff-id="1" data-diff-type="compliant">
import numpy as np
def foo():
    generator = np.random.default_rng(42)
    x = generator.standard_normal()
</pre>
<h2>Resources</h2>
<h3>Documentation</h3>
<ul>
  <li> NumPy Documentation - <a href="https://numpy.org/doc/stable/reference/random/generator.html#random-generator">Random Generator</a> </li>
  <li> NumPy Documentation - <a href="https://numpy.org/doc/stable/reference/random/legacy.html#legacy-random-generation">Legacy Random Generation</a>
  </li>
  <li> NumPy Documentation - <a href="https://numpy.org/neps/nep-0019-rng-policy.html">NEP19 RNG Policy</a> </li>
</ul>

